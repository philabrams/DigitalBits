target_sources(core
    PRIVATE
        BanManager.h
        BanManagerImpl.cpp
        BanManagerImpl.h
        DigitalBitsXDR.h
        Floodgate.cpp
        Floodgate.h
        ItemFetcher.cpp
        ItemFetcher.h
        OverlayManager.h
        OverlayManagerImpl.cpp
        OverlayManagerImpl.h
        OverlayMetrics.cpp
        OverlayMetrics.h
        Peer.cpp
        Peer.h
        PeerAuth.cpp
        PeerAuth.h
        PeerBareAddress.cpp
        PeerBareAddress.h
        PeerDoor.cpp
        PeerDoor.h
        PeerManager.cpp
        PeerManager.h
        PeerSharedKeyId.cpp
        PeerSharedKeyId.h
        RandomPeerSource.cpp
        RandomPeerSource.h
        SurveyManager.cpp
        SurveyManager.h
        SurveyMessageLimiter.cpp
        SurveyMessageLimiter.h
        TCPPeer.cpp
        TCPPeer.h
        Tracker.cpp
        Tracker.h

        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/FloodTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/ItemFetcherTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/LoopbackPeer.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/LoopbackPeer.h>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/OverlayManagerTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/OverlayTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/PeerManagerTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/SurveyManagerTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/SurveyMessageLimiterTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/TCPPeerTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/TrackerTests.cpp>
)