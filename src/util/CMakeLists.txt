target_sources(core
    PRIVATE
        Algoritm.h
        Backtrace.cpp
        Backtrace.h
        BitSet.h
        Decoder.h
        FileSystemException.cpp
        FileSystemException.h
        Fs.cpp
        Fs.h
        GlobalChecks.cpp
        GlobalChecks.h
        HashOfHash.cpp
        HashOfHash.h
        LogSlowExecution.cpp
        LogSlowExecution.h
        Logging.cpp
        Logging.h
        Math.cpp
        Math.h
        MetricResetter.cpp
        MetricResetter.h
        NonCopyable.h
        RandHasher.h
        RandomEvictionCache.h
        Scheduler.cpp
        Scheduler.h
        SecretValue.cpp
        SecretValue.h
        SpdlogTweaks.h
        StatusManager.cpp
        StatusManager.h
        Thread.cpp
        Thread.h
        Timer.cpp
        Timer.h
        TmpDir.cpp
        TmpDir.h
        UnorderedMap.h
        UnorderedSet.h
        XDRCereal.cpp
        XDRCereal.h
        XDROperators.h
        XDRStream.h
        asio.h
        must_use.h
        numeric.cpp
        numeric.h
        optional.h
        types.cpp
        types.h

        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/BalanceTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/BigDivideTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/BitSetTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/CacheTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/DecoderTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/FsTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/MathTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/MetricTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/SchedulerTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/StatusManagerTest.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/TimerTests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/Uint128Tests.cpp>
        $<$<BOOL:${BUILD_TESTS_OPTION}>:${CMAKE_CURRENT_SOURCE_DIR}/test/XDRStreamTests.cpp>
    )